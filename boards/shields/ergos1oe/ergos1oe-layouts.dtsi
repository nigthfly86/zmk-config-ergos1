#include <physical_layouts.dtsi>

/*
 * Notes:
 * - 100 units = 1.0u
 * - key_physical_attrs: <w h x y r rx ry>
 * - This file keeps your original key order (from your keymap bindings list).
 */

#define U 100

/* Simple stagger profile for the 6 alpha columns (pinky -> inner).
 * (Higher y = lower on screen)
 * Tuned to resemble your photo: pinky lower, middle/index higher.
 */
#define ST0  25   /* pinky */
#define ST1  10   /* ring  */
#define ST2   0   /* middle */
#define ST3   0   /* index  */
#define ST4  10   /* inner */
#define ST5  25   /* inner-most */

#define LHX0  (0*U)
#define LHX1  (1*U)
#define LHX2  (2*U)
#define LHX3  (3*U)
#define LHX4  (4*U)
#define LHX5  (5*U)

/* Right half mirror start */
#define RHX  900
#define RHX0 (RHX + 0*U)
#define RHX1 (RHX + 1*U)
#define RHX2 (RHX + 2*U)
#define RHX3 (RHX + 3*U)
#define RHX4 (RHX + 4*U)
#define RHX5 (RHX + 5*U)

#define RST0 ST5
#define RST1 ST4
#define RST2 ST3
#define RST3 ST2
#define RST4 ST1
#define RST5 ST0

/ {
    ergos1oe_physical_layout: ergos1oe_physical_layout {
        compatible = "zmk,physical-layout";
        display-name = "ergos1oe (photo-ish)";

        /*
         * You already set these in the overlay:
         *  kscan = <&kscan0>;
         *  transform = <&default_transform>;
         */

        keys =
            /* ---------------- Row 1 (12): left 6, right 6 ---------------- */
            <&key_physical_attrs U U LHX0 (0*U + ST0) 0 0 0>, /* = / Esc label in your map */
            <&key_physical_attrs U U LHX1 (0*U + ST1) 0 0 0>,
            <&key_physical_attrs U U LHX2 (0*U + ST2) 0 0 0>,
            <&key_physical_attrs U U LHX3 (0*U + ST3) 0 0 0>,
            <&key_physical_attrs U U LHX4 (0*U + ST4) 0 0 0>,
            <&key_physical_attrs U U LHX5 (0*U + ST5) 0 0 0>,

            <&key_physical_attrs U U RHX0 (0*U + RST0) 0 0 0>,
            <&key_physical_attrs U U RHX1 (0*U + RST1) 0 0 0>,
            <&key_physical_attrs U U RHX2 (0*U + RST2) 0 0 0>,
            <&key_physical_attrs U U RHX3 (0*U + RST3) 0 0 0>,
            <&key_physical_attrs U U RHX4 (0*U + RST4) 0 0 0>,
            <&key_physical_attrs U U RHX5 (0*U + RST5) 0 0 0>,

            /* ---------------- Row 2 (12) ---------------- */
            <&key_physical_attrs U U LHX0 (1*U + ST0) 0 0 0>,
            <&key_physical_attrs U U LHX1 (1*U + ST1) 0 0 0>,
            <&key_physical_attrs U U LHX2 (1*U + ST2) 0 0 0>,
            <&key_physical_attrs U U LHX3 (1*U + ST3) 0 0 0>,
            <&key_physical_attrs U U LHX4 (1*U + ST4) 0 0 0>,
            <&key_physical_attrs U U LHX5 (1*U + ST5) 0 0 0>,

            <&key_physical_attrs U U RHX0 (1*U + RST0) 0 0 0>,
            <&key_physical_attrs U U RHX1 (1*U + RST1) 0 0 0>,
            <&key_physical_attrs U U RHX2 (1*U + RST2) 0 0 0>,
            <&key_physical_attrs U U RHX3 (1*U + RST3) 0 0 0>,
            <&key_physical_attrs U U RHX4 (1*U + RST4) 0 0 0>,
            <&key_physical_attrs U U RHX5 (1*U + RST5) 0 0 0>,

            /* ---------------- Row 3 (12) ---------------- */
            <&key_physical_attrs U U LHX0 (2*U + ST0) 0 0 0>,
            <&key_physical_attrs U U LHX1 (2*U + ST1) 0 0 0>,
            <&key_physical_attrs U U LHX2 (2*U + ST2) 0 0 0>,
            <&key_physical_attrs U U LHX3 (2*U + ST3) 0 0 0>,
            <&key_physical_attrs U U LHX4 (2*U + ST4) 0 0 0>,
            <&key_physical_attrs U U LHX5 (2*U + ST5) 0 0 0>,

            <&key_physical_attrs U U RHX0 (2*U + RST0) 0 0 0>,
            <&key_physical_attrs U U RHX1 (2*U + RST1) 0 0 0>,
            <&key_physical_attrs U U RHX2 (2*U + RST2) 0 0 0>,
            <&key_physical_attrs U U RHX3 (2*U + RST3) 0 0 0>,
            <&key_physical_attrs U U RHX4 (2*U + RST4) 0 0 0>,
            <&key_physical_attrs U U RHX5 (2*U + RST5) 0 0 0>,

            /* ---------------- Row 4 (16): left 6, inner 4, right 6 ---------------- */
            <&key_physical_attrs U U LHX0 (3*U + ST0) 0 0 0>,
            <&key_physical_attrs U U LHX1 (3*U + ST1) 0 0 0>,
            <&key_physical_attrs U U LHX2 (3*U + ST2) 0 0 0>,
            <&key_physical_attrs U U LHX3 (3*U + ST3) 0 0 0>,
            <&key_physical_attrs U U LHX4 (3*U + ST4) 0 0 0>,
            <&key_physical_attrs U U LHX5 (3*U + ST5) 0 0 0>,

            /* Inner 4 keys (Ctrl/GUI/Alt/Ctrl region). Keep them compact. */
            <&key_physical_attrs U U 650 315 0 0 0>,
            <&key_physical_attrs U U 750 315 0 0 0>,
            <&key_physical_attrs U U 850 315 0 0 0>,
            <&key_physical_attrs U U 950 315 0 0 0>,

            <&key_physical_attrs U U (RHX0+200) (3*U + RST0) 0 0 0>,
            <&key_physical_attrs U U (RHX1+200) (3*U + RST1) 0 0 0>,
            <&key_physical_attrs U U (RHX2+200) (3*U + RST2) 0 0 0>,
            <&key_physical_attrs U U (RHX3+200) (3*U + RST3) 0 0 0>,
            <&key_physical_attrs U U (RHX4+200) (3*U + RST4) 0 0 0>,
            <&key_physical_attrs U U (RHX5+200) (3*U + RST5) 0 0 0>,

            /* ---------------- Row 5 (14): left 4, middle 6, right 4 ---------------- */
            /* Left bottom row (matches your photo: `~ Del ← → Bksp`): */
            <&key_physical_attrs U U (LHX1-10) 430 0 0 0>, /* GRAVE */
            <&key_physical_attrs U U (LHX2-10) 440 0 0 0>, /* DELETE */
            <&key_physical_attrs U U (LHX3-10) 450 0 0 0>, /* LEFT  */
            <&key_physical_attrs U U (LHX4-10) 450 0 0 0>, /* RIGHT */

            /* Middle 6 (order from your keymap):
            *   BACKSPACE, MO(1), HOME, PG_UP, ENTER, SPACE
            *
            * Photo-matching intent:
            *   - BACKSPACE = left vertical 2u
            *   - FN (MO1)  = right vertical 2u
            *   - small key above them (we'll put ENTER here for now)
            *   - HOME/PGUP as the right vertical pair (you can swap PGUP->END later if you prefer)
            *   - SPACE as a small key between/near thumbs for now
            */
            <&key_physical_attrs U (2*U) 650 460 0 0 0>,   /* BACKSPACE 2u vertical (left) */
            <&key_physical_attrs U (2*U) 760 460 0 0 0>,   /* MO(1) / FN 2u vertical (right) */

            <&key_physical_attrs U U      705 420 0 0 0>,  /* HOME (small, above/between thumbs) */
            <&key_physical_attrs U U      870 460 0 0 0>,  /* PG_UP (right column, top) */

            <&key_physical_attrs U U      760 420 0 0 0>,  /* ENTER (small above right thumb) */
            <&key_physical_attrs U U      870 560 0 0 0>,  /* SPACE (right column, bottom) */

            /* Right bottom row 4 keys (mirror of left-bottom style) */
            <&key_physical_attrs U U (RHX1+210) 450 0 0 0>,
            <&key_physical_attrs U U (RHX2+210) 450 0 0 0>,
            <&key_physical_attrs U U (RHX3+210) 440 0 0 0>,
            <&key_physical_attrs U U (RHX4+210) 430 0 0 0>,

            /* ---------------- Row 6 (2): remaining two keys (END, PG_DN in your map) ----------------
             * Place them as a mirrored pair beneath the thumb area for now.
             */
            <&key_physical_attrs U U 760 590 0 0 0>,  /* END   */
            <&key_physical_attrs U U 650 590 0 0 0>   /* PG_DN */
            ;
    };
};
